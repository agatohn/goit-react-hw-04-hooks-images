(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{38:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(4),a=n.n(r),o=n(3),s=n(5),i=n(1);function u(e){var t=e.onSubmit,n=Object(c.useState)(""),r=Object(o.a)(n,2),a=r[0],u=r[1];return Object(i.jsx)("header",{className:"Searchbar",children:Object(i.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==a.trim()?(t(a),u("")):s.b.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441.")},className:"SearchForm",children:[Object(i.jsx)("button",{type:"submit",className:"SearchForm-button",children:Object(i.jsx)("span",{className:"SearchForm-button-label",children:"Search"})}),Object(i.jsx)("input",{onChange:function(e){u(e.currentTarget.value.toLowerCase())},value:a,className:"SearchForm-input",type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}var l=n(8);function j(e){var t=e.url,n=e.alt,c=e.onClick,r=e.urlLarge;return Object(i.jsx)("li",{className:"ImageGalleryItem",children:Object(i.jsx)("img",{onClick:function(){return c(r)},src:t,alt:n,className:"ImageGalleryItem-image"})})}var b={fetchImg:function(e,t){var n=e.trim(" ").split(" ").join("+");return fetch("https://pixabay.com/api/?q=".concat(n,"&page=").concat(t,"&key=23292771-6d1481bed529939f67189ab21&image_type=photo&orientation=horizontal&per_page=12")).then((function(t){return t.ok?t.json():Promise.reject(new Error("\u041f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 <<".concat(e,">> \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e")))}))}},d=n(10),m=n.n(d);function h(e){var t=e.query,n=e.page,r=e.onOpen,a=e.handlePageIncr,u=Object(c.useState)(null),d=Object(o.a)(u,2),h=d[0],O=d[1],f=Object(c.useState)(null),g=Object(o.a)(f,2),p=g[0],v=g[1],x=Object(c.useState)("idle"),S=Object(o.a)(x,2),w=S[0],y=S[1];function k(e,t){O(e),y(t)}function N(e,t){v(e),y(t)}return Object(c.useEffect)((function(){t&&(""!==t&&1===n&&(y("pending"),b.fetchImg(t).then((function(e){var t=e.hits;if(t[0])return k(Object(l.a)(t),"resolved");s.b.error("\u0422\u0430\u043a\u043e\u0439 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438 \u043d\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442."),y("idle")})).catch((function(e){return N(e,"rejected")}))),1!==n&&""!==t&&(y("pending"),b.fetchImg(t,n).then((function(e){var t=e.hits;return k([].concat(Object(l.a)(h),Object(l.a)(t)),"resolved")})).catch((function(e){return N(e,"rejected")})).finally((function(){return window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}))))}),[n,t]),Object(i.jsxs)(i.Fragment,{children:["idle"===w&&Object(i.jsx)("div",{className:"Div",children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u044b\u0439 \u0437\u0430\u043f\u0440\u043e\u0441."}),"rejected"===w&&Object(i.jsxs)("div",{children:["\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ",p.message]}),("resolved"===w||"pending"===w&&h)&&Object(i.jsx)("ul",{className:"ImageGallery",children:h.map((function(e){return Object(i.jsx)(j,{urlLarge:e.largeImageURL,url:e.webformatURL,alt:e.tags,onClick:r},e.id+e.webformatURL)}))}),"resolved"===w&&Object(i.jsx)("button",{onClick:a,className:"Button",type:"button",children:"Load More!"}),"pending"===w&&Object(i.jsx)(m.a,{className:"Loader",type:"ThreeDots",color:"#00BFFF",height:20,width:100,timeout:1e3})]})}var O=document.querySelector("#modal-root");function f(e){var t=e.onClose,n=e.url,a=function(e){"Escape"===e.code&&t()};return Object(c.useEffect)((function(){return window.addEventListener("keydown",a),function(){window.removeEventListener("keydown",a)}})),Object(r.createPortal)(Object(i.jsx)("div",{className:"Overlay",onClick:function(e){e.currentTarget===e.target&&t()},children:Object(i.jsx)("div",{className:"Modal",children:Object(i.jsx)("img",{src:n,alt:"modal"})})}),O)}function g(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(1),l=Object(o.a)(a,2),j=l[0],b=l[1],d=Object(c.useState)(!1),m=Object(o.a)(d,2),O=m[0],g=m[1],p=Object(c.useState)(""),v=Object(o.a)(p,2),x=v[0],S=v[1];return Object(i.jsxs)("div",{children:[Object(i.jsx)(u,{onSubmit:function(e){r(e),b(Number(1))}}),O&&Object(i.jsx)(f,{url:x,onClose:function(){g(!1),S("")}}),Object(i.jsx)(h,{query:n,page:j,onOpen:function(e){S(e),g(!0)},handlePageIncr:function(){b(j+1)}}),Object(i.jsx)(s.a,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0})]})}n(36),n(37),n(38),n(39);a.a.render(Object(i.jsx)(g,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.3094bbbc.chunk.js.map